<body>
  <p id="numresults"><strong>{$search-result-count:=extract(.,"[0-9]+")}</strong></p>
  <div class="searchresults">
    <table>
      <tr>
        <td/>
        <td><a class="title">{$book := {"title": ., "home-url": resolve-uri(@href)}}</a>
          <span class="author">{$book.author}</span>?
          <span class="type">{$book.year:=extract(.,"[0-9]{4}")}</span>?
           <span class="availability">
             {$book.statusId:=if(exists(span[contains(@class,"available")])) then "available" else "lend"}
           </span>
        </td>
        
      </tr>+
    </table>
  </div>
</body>