<html>
  <t:switch-prioritized>
    <form t:condition="contains(@action, 'reservation.do') or contains(@action, 'order.do') ">
        <table class="formular">
          <tr><td> 
              <input name="issuepoint" class="radio">{
                book.orderConfirmationOptionTitles := 
                  if ($book.orderConfirmationOptionTitles) then concat($book.orderConfirmationOptionTitles, "\|", ..)
                  else ..,
                issuePoints := (get("issuePoints", ()), @value)}</input>
          </td></tr>+
        </table>

      {if (contains($book.orderConfirmationOptionTitles, "\|") ) then (
        confirm := form(., {"issuepoint": ""}),
        book.orderConfirmation := "Wohin soll das Buch vorbestellt werden?"
       ) else (
        confirm := form(.),
        book.orderConfirmation := "")
      }
    </form>
    
    <form t:condition="contains(@action, 'reservation.do') or contains(@action, 'order.do') ">
      <span>{book.orderConfirmation := join(../(span|input/@value))}</span>
      {confirm := form(.)}
    </form>
    
    <form t:condition="contains(@action, 'acknowledge.do') ">
     <!-- ok -->
    </form>
  </t:switch-prioritized>
</html>
    