<html>
<head>
<template:read source="''" var="bookCount"/>
</head>
<body>
   <div id="main"> 
     <div id="middle"> 
        <div id="tab"> <!--There is another div in-between, but its id changes between current1, active1 and label1, so don't check it-->
           Ausleihen<template:read source="." var="bookCount" regex="[0-9]+"/>
           <template:if test="$bookCount = ''">INVALID CANCEL CURRENT TAG</template:if>
        </div>
        
  <div id="tab-content">
  

    <div class="box">
      <div class="box-header">
        <h2>Ausleihen</h2>
      </div>
    </div>
    <!--<fieldset>-->

    <template:read var="delete-current-books()"/>

<!--    <template:if test="$allBooksAway=''">-->
    <table class="data">
      <tr>
        <th scope="col"></th>
      </tr>

      <template:loop>      

      <tr>
        <th scope="row"></th>
        {book := object(("select(new)",""))}
        <td>
          <strong><template:read source="." var="book.title"/></strong><br/>
          <template:read source="true()" var="spanmissing"/>
          <template:read source="false()" var="previousspan"/>
          <template:read source="text()" var="book.author"/><br/>
          <template:read source="text()" var="book.id" regex="^[^/]*"/><br/>
          <a template:optional="true">
            <template:read source="@href" var="book.extendID" regex="actPos=([0-9]+)$" submatch="1"/>
            <span>
              <template:read source="." var="book.status:curious"/>
              <template:read source="@class != 'textgruen'" var="spanmissing"/>
            </span>
          </a>
	  <span template:optional="true">
            <template:read source="." var="book.status:problematic"/>
            <template:read source="false()" var="spanmissing"/>
            <template:read source="true()" var="previousspan"/>
          </span>
<!--	  <template:if test="$previousspan">
	    <span template:optional="true">
              <template:read source="concat("$book.status:problematic ", text())" var="book.status:problematic"/>
              <template:read source="false()" var="spanmissing"/>
            </span>
           </template:if>-->
         </td>
         <template:if test="$spanmissing"><broken/></template:if>
         <td>
           {book.issuedate:=parse-date(filter(text(), '^\d{2}\.\d{2}\.\d{4}'), 'dd.mm.yyyy'),
            book.limitdate:=parse-date(filter(text(),'- *(\d{2}\.\d{2}\.\d{4})', 1), 'dd.mm.yyyy')
           }<br/>
	 </td>
        <!-- <template:read var="book-end()"/>-->
       </tr>
              
      </template:loop>      
               
      </table>
  <!--    </template:if>-->
    <!-- </fieldset> -->
      <div class="box"><div class="box-header"><div class="box-right">
        <a t:optional="true">2<t:read var="raise()" source='"Es scheint, als zeigt der Webkatalog die Ausleihen auf mehreren Seiten an. Ich kann aber momentan nur die Ausleihen einer einzelnen Seite anzeigen. $line-ending; $line-ending;  Um alle Ausleihen zu sehen, musst du die Zahl der angezeigten Suchergebnisse im BTH RWTH Katalog unter der  Konto / Sucheinstellungen Seite entsprechend erhÃ¶hen."'/> </a>
      </div></div></div>
   </div>
  </div>
 </div>
</body>
</html>
  
