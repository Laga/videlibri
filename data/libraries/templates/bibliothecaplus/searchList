<t:switch prioritized="true">

<form>{form:=form(.)}
<a id="dnn_dnnLOGIN_loginLink">{$loginlink := @href}</a>
<DIV class="DnnModule-OPENSearchModule">
  <div t:condition="contains(@id, 'SearchResult_ResultArea')">
    <span t:condition="contains(@id, 'DataPager1')">
      <input t:condition="contains(@name, 'PreviousButton')">{prev-page := form-combine($form, {(@name || ".x"): 5, (@name || ".y"): 5})}</input>?
      <input t:condition="contains(@name, 'NextButton')">{
        if ($current-page eq $last-visited-page) then (search-next-page-available := true()) else (), 
        next-page := form-combine($form, {(@name || ".x"): 5, (@name || ".y"): 5})}</input>?
      <span t:condition="contains(@id, 'TotalItemsLabel')">{search-result-count := normalize-space(.)}</span>
    </span>

  
    <div t:condition="matches(@id, '(ComprehensiveItem|divMedium)$')">
      <table><tr>
        <td    class="standardPaddingCover"/>
        <td  >
          <a>{book := {"title": ., "_detailId": extract(@href, "dnn.*btn.*Value"), "_page": $current-page}}</a>
          
          <span t:condition="contains(@id, 'LblSubTitleValue')">{book.title := x"{$book.title}: {.}"}</span>? 
          
          <div>     
             <span>{cat := .}</span>
             <span>{
               let $temp := extract($cat/@id, "_Lbl(.*)$", 1) 
               return if (exists($search-reverse-keys($temp))) then $book($search-reverse-keys($temp)) := .
                      else $book($cat||"!") := .}</span> 
          </div>*
        </td>
      </tr></table>
    </div>+ 
  </div>
</DIV>
 
<!--
<DIV id="Result" class="result">
  <div class="result_gefunden">Gefunden:<t:s>search-result-count := extract(., "[0-9 ]+$")</t:s></div>
  <TABLE class="resulttab" t:test="$search-result-count > 0">
    <TR><TH/></TR>
    <TR>
      <TD/>
      <TD>
        <A>{let $x := . return $book := {
          "author": substring-before($x, ":"), 
          "title": if (contains($x, ":")) then extract($x, "^[^:]+:(.*)-[0-9 ]+$", 1, "s") else substring-before($x, "-"), 
          "year": extract($x, "[0-9 ]+$"),
          "_detailsBackScroll": if (contains($url, "scrollAction")) then $url else $url || "?scrollAction=1",
          "_details": resolve-uri(@href) }}</A>
      </TD>
    </TR>+
  </TABLE>
  <div class="result_nav">
    <u/> <a>{search-next-page-available := true(), next-page := @href}</a>
  </div>?
</DIV>
-->
</form>



<div t:condition="contains(@id, 'dnn_ctr690_MainView_UcNormalView_DivSearchResultView') 
                  and matches(., 'Ihre Suche erzielte keine Treffer|No results available')">{search-result-count := 0}</div>

</t:switch>